<!DOCTYPE html>
<html lang="en" class="scroll-smooth group" data-sidebar="brand" dir="ltr">

<head>
    <meta charset="utf-8" />
    <title>IMS - EzStock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta content="Inventory Management System for Small Businesses" name="description" />
    <meta content="" name="EzStock" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/EzStock.png" />

    <!-- Css -->
    <!-- Main Css -->
    <link href="assets/css/flatpickr.min.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/datepicker.css">
    <link rel="stylesheet" href="assets/css/selectr.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <script src="https://kit.fontawesome.com/5e1b21a2a2.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body data-layout-mode="light" data-sidebar-size="default" data-theme-layout="vertical"
    class="bg-[#EEF0FC] dark:bg-gray-900">

    <!-- leftbar-tab-menu -->
    <div
        class="min-h-full z-[99]  fixed inset-y-0 print:hidden bg-gradient-to-t from-[#6f3dc3] from-10% via-[#603dc3] via-40% to-[#5c3dc3] to-100% dark:bg-[#603dc3] main-sidebar duration-300 group-data-[sidebar=dark]:bg-[#603dc3] group-data-[sidebar=brand]:bg-brand group-[.dark]:group-data-[sidebar=brand]:bg-[#603dc3]">
        <div
            class=" text-center border-b bg-[#603dc3] border-r h-[64px] flex justify-center items-center brand-logo dark:bg-[#603dc3] dark:border-slate-700/40 group-data-[sidebar=dark]:bg-[#603dc3] group-data-[sidebar=dark]:border-slate-700/40 group-data-[sidebar=brand]:bg-brand group-[.dark]:group-data-[sidebar=brand]:bg-[#603dc3] group-data-[sidebar=brand]:border-slate-700/40">
            <a href="index.html" class="logo">
                <span>
                    <img src="assets/images/EzStock.png" alt="logo-small" class="logo-sm h-8 align-middle inline-block">
                </span>
                <span>
                    <img src="assets/images/logo.png" alt="logo-large"
                        class="logo-lg h-[28px] logo-light hidden dark:inline-block ms-1 group-data-[sidebar=dark]:inline-block group-data-[sidebar=brand]:inline-block">
                    <img src="assets/images/EzStock.png" alt="logo-large"
                        class="logo-lg h-[28px] logo-dark inline-block dark:hidden ms-1 group-data-[sidebar=dark]:hidden group-data-[sidebar=brand]:hidden">
                </span>
            </a>
        </div>
        <div class="border-r pb-14 h-[100vh] dark:bg-[#603dc3] dark:border-slate-700/40 group-data-[sidebar=dark]:border-slate-700/40 group-data-[sidebar=brand]:border-slate-700/40"
            data-simplebar>
            <div class="p-4 block">
                <ul class="navbar-nav">
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Main</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="index.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-border-all"></i>
                                </span>
                                <span>Dashboard</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Products</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="product.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-box"></i>
                                </span>
                                <span>Product List</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="addProduct.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-square-plus"></i>
                                </span>
                                <span>Create Product</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="category.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-list"></i>
                                </span>
                                <span>Category</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="brands.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-tag"></i>
                                </span>
                                <span>Brands</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Sales</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="salesList.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                </span>
                                <span>Sales List</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="addSales.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-cart-plus"></i>
                                </span>
                                <span>Create Sales</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Purchases</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="purchaseList.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-basket-shopping"></i>
                                </span>
                                <span>Purchase List</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="addPurchase.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-wallet"></i>
                                </span>
                                <span>Create Purchase</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">People</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="customer.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-user-tag"></i>
                                </span>
                                <span>Customer</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="supplier.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-users"></i>
                                </span>
                                <span>Supplier</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Report</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="salesReport.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-chart-line"></i>
                                </span>
                                <span>Sales Report</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="purchaseReport.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-chart-gantt"></i>
                                </span>
                                <span>Purchase Report</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="invoiceReport.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-chart-column"></i>
                                </span>
                                <span>Invioce Report</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="customerReport.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-chart-bar"></i>
                                </span>
                                <span>Customer Report</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="supplierReport.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-chart-area"></i>
                                </span>
                                <span>Supplier Report</span>
                            </a>
                        </div>
                    </li>
                    <li
                        class="uppercase text-[11px]  text-primary-500 dark:text-primary-400 mt-0 leading-4 mb-2 group-data-[sidebar=dark]:text-primary-400 group-data-[sidebar=brand]:text-primary-300">
                        <span
                            class="text-[9px] text-slate-600 dark:text-slate-500 group-data-[sidebar=dark]:text-slate-500 group-data-[sidebar=brand]:text-slate-400">Settings</span>
                    </li>
                    <li>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="profile.html"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-user-gear"></i>
                                </span>
                                <span>Profile</span>
                            </a>
                        </div>
                        <div id="parent-accordion" data-fc-type="accordion">
                            <a href="javascript:void(0);"
                                class="nav-link hover:bg-transparent hover:text-black rounded-md dark:hover:text-slate-200 flex items-center decoration-0 px-3 py-3 cursor-pointer group-data-[sidebar=dark]:hover:text-slate-200 group-data-[sidebar=brand]:hover:text-slate-200"
                                onclick="confirmLogout()" data-fc-type="collapse" data-fc-parent="parent-accordion">
                                <span
                                    class="w-5 h-6 text-center text-slate-800 dark:text-slate-400 me-2 group-data-[sidebar=dark]:text-slate-400 group-data-[sidebar=brand]:text-slate-400">
                                    <i class="fa-solid fa-right-from-bracket"></i>
                                </span>
                                <span>Logout</span>
                            </a>
                        </div>
                    </li>



                </ul>

            </div>
        </div>
    </div> <!-- End leftbar-tab-menu -->

    <!-- Topbar -->
    <nav id="topbar" class="topbar border-b  dark:border-slate-700/40  fixed inset-x-0  duration-300
block print:hidden z-50">
        <div
            class="mx-0 flex max-w-full flex-wrap items-center lg:mx-auto relative top-[50%] start-[50%] transform -translate-x-1/2 -translate-y-1/2">
            <div class="ltr:mx-2  rtl:mx-2">
                <button id="toggle-menu-hide" class="button-menu-mobile flex rounded-full md:me-0 relative">
                    <i class="fa-solid fa-bars top-icon w-5 h-5"></i>
                </button>
            </div>
            <div class="flex items-center md:w-[40%] lg:w-[30%] xl:w-[20%]">
                <div class="relative ltr:mx-2 rtl:mx-2 self-center">
                    <button
                        class="px-2 py-1 bg-primary-500/10 border border-transparent collapse:bg-green-100 text-primary text-sm rounded hover:bg-blue-600 hover:text-white"><i
                            class="ti ti-plus me-1"></i> New Task</button>
                </div>
            </div>

            <div class="order-1 ltr:ms-auto rtl:ms-0 rtl:me-auto flex items-center md:order-2">
                <div class="ltr:me-2 ltr:md:me-4 rtl:me-0 rtl:ms-2 rtl:lg:me-0 rtl:md:ms-4 dropdown relative">
                    <button type="button" class="dropdown-toggle flex rounded-full md:me-0" aria-expanded="false"
                        data-fc-autoclose="both" data-fc-type="dropdown">
                        <span class="top-icon w-5 h-5">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </span>
                    </button>

                    <div class="left-auto right-0 z-50 my-1 hidden min-w-[300px]
  list-none divide-y  divide-gray-100 rounded-md border-slate-700
  md:border-white text-base shadow dark:divide-gray-600 bg-white
  dark:bg-slate-800" onclick="event.stopPropagation()">
                        <div class="relative">
                            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center
      pl-3">
                                <i class="fa-solid fa-search text-gray-400 dark:text-gray-400 z-10"></i>
                            </div>
                            <input type="text" id="email-adress-icon" class="block w-full rounded-lg border border-slate-200 dark:border-slate-700/60 bg-slate-200/10 p-1.5
      pl-10 text-slate-600 dark:text-slate-400 outline-none focus:border-slate-300
      focus:ring-slate-300 dark:bg-slate-800/20 sm:text-sm" placeholder="Search..." />
                        </div>
                    </div>
                </div>
                <div class="ltr:me-2 ltr:md:me-4 rtl:me-0 rtl:ms-2 rtl:lg:me-0 rtl:md:ms-4">

                    <button id="toggle-theme" class="flex rounded-full md:me-0 relative">
                        <span class="top-icon w-5 h-5 light ">
                            <i class="fa-solid fa-moon"></i>
                        </span>
                        <span class="top-icon w-5 h-5 dark hidden">
                            <i class="fa-solid fa-sun"></i>
                        </span>
                    </button>
                </div>
                <div class="ltr:me-2 ltr:lg:me-4 rtl:me-0 rtl:ms-2 rtl:lg:me-0 rtl:md:ms-4 dropdown relative">
                    <button type="button" class="dropdown-toggle flex rounded-full md:me-0" id="Notifications"
                        aria-expanded="false" data-fc-autoclose="both" data-fc-type="dropdown">
                        <span class="top-icon w-5 h-5">
                            <i class="fa-solid fa-bell"></i>
                        </span>
                    </button>

                    <div class="left-auto right-0 z-50 my-1 hidden w-64
  list-none divide-y h-52 divide-gray-100 rounded border border-slate-700/10
 text-base shadow dark:divide-gray-600 bg-white
  dark:bg-slate-800" id="navNotifications" data-simplebar>
                        <ul class="py-1" aria-labelledby="navNotifications">
                            <!-- Notifications -->
                        </ul>
                    </div>
                </div>
                <div class="me-2  dropdown relative">
                    <button type="button"
                        class="dropdown-toggle flex items-center rounded-full text-sm focus:bg-none focus:ring-0 dark:focus:ring-0 md:me-0"
                        id="user-profile" aria-expanded="false" data-fc-autoclose="both" data-fc-type="dropdown">
                        <img id="userImage" class="h-8 w-8 rounded-full" alt="user photo" />
                        <span class="ltr:ms-2 rtl:ms-0 rtl:me-2 hidden text-left xl:block">
                            <div class="user-info">
                                <span id="username" class="block font-medium text-slate-600 dark:text-gray-300"></span>
                            </div>
                            <span class="-mt-0.5 block text-xs text-slate-500 dark:text-gray-400">Admin</span>
                        </span>
                    </button>


                    <div class="left-auto right-0 z-50 my-1 hidden list-none
  divide-y divide-gray-100 rounded border border-slate-700/10
  text-base shadow dark:divide-gray-600 bg-white dark:bg-slate-800 w-40" id="navUserdata">

                        <ul class="py-1" aria-labelledby="navUserdata">
                            <li>
                                <a href="profile.html" class="flex items-center py-2 px-3 text-sm text-gray-700 hover:bg-gray-50
        dark:text-gray-200 dark:hover:bg-gray-900/20
        dark:hover:text-white">
                                    <span class="w-4 h-5 inline-block text-slate-800 dark:text-slate-400 me-2">
                                        <i class="fa-solid fa-circle-user"></i>
                                    </span>
                                    Profile</a>
                            </li>
                            <li>
                                <a href="settings.html" class="flex items-center py-2 px-3 text-sm text-gray-700 hover:bg-gray-50
        dark:text-gray-200 dark:hover:bg-gray-900/20
        dark:hover:text-white">
                                    <span class="w-4 h-5 inline-block text-slate-800 dark:text-slate-400 me-2">
                                        <i class="fa-solid fa-gear"></i>
                                    </span>
                                    Settings</a>
                            </li>
                            <li>
                                <a href="#" class="flex items-center py-2 px-3 text-sm text-gray-700 hover:bg-gray-50
        dark:text-gray-200 dark:hover:bg-gray-900/20
        dark:hover:text-white">
                                    <span class="w-4 h-5 inline-block text-slate-800 dark:text-slate-400 me-2">
                                        <i class="fa-solid fa-dollar-sign"></i>
                                    </span>
                                    Earnings</a>
                            </li>
                            <li>
                                <a href="login.html" class="flex items-center py-2 px-3 text-sm text-red-500 hover:bg-gray-50 hover:text-red-600
        dark:text-red-500 dark:hover:bg-gray-900/20
        dark:hover:text-red-500">
                                    <span class="w-4 h-5 inline-block text-red-500 dark:text-red-500 me-2">
                                        <i class="fa-solid fa-right-from-bracket"></i>
                                    </span>
                                    Sign out</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav><!--End Topbar -->


    <div class="ltr:flex flex-1 rtl:flex-row-reverse">
        <form id="salesForm"></form>
        <div
            class="page-wrapper relative ltr:ms-auto rtl:me-auto rtl:ms-0 w-[calc(100%-260px)] px-4 pt-[64px] duration-300">
            <div class="xl:w-full">
                <div class="flex flex-wrap">
                    <div class="flex items-center py-4 w-full">
                        <div class="w-full">
                            <div class="">
                                <div class="flex flex-wrap justify-between">
                                    <div class="items-center ">
                                        <h1 id="salesOrderTitle" class="font-medium text-3xl block dark:text-slate-100">
                                            Sales Order: #
                                        </h1>
                                        <ol class="list-reset flex text-sm">
                                            <li><a href="#" class="text-gray-500 dark:text-slate-400">IMS</a></li>
                                            <li><span class="text-gray-500 dark:text-slate-400 mx-2">/</span></li>
                                            <li class="text-gray-500 dark:text-slate-400">EzStock</li>
                                            <li><span class="text-gray-500 dark:text-slate-400 mx-2">/</span></li>
                                            <li class="text-primary-500 hover:text-primary-600 dark:text-primary-400">
                                                Create Sales</li>
                                        </ol>
                                    </div>
                                    <div class="flex items-center">
                                        <div
                                            class="today-date leading-5 mt-2 lg:mt-0 form-input w-auto rounded-md border inline-block border-primary-500/60 dark:border-primary-500/60 text-primary-500 bg-transparent px-3 py-1 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-primary-400 focus:border-primary-500 dark:focus:border-primary-500  dark:hover:border-slate-700">
                                            <input type="text"
                                                class="dash_date border-0 focus:border-0 focus:outline-none" readonly
                                                required="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!--end container-->

            <div class="xl:w-full  min-h-[calc(100vh-138px)] relative pb-14">
                <div class="grid grid-cols-12 sm:grid-cols-12 md:grid-cols-12 lg:grid-cols-12 xl:grid-cols-12 gap-4">
                    <div class="col-span-12 sm:col-span-12 md:col-span-12 lg:col-span-8 xl:col-span-9 mb-4">
                        <div class="w-full relative mb-4">
                            <div class="flex-auto p-0 md:p-4">
                                <div class="mb-2 flex items-center">
                                    <div class="flex-grow">
                                        <label for="cust_name"
                                            class="font-medium text-sm text-slate-600 dark:text-slate-400">Customer
                                            Name</label>
                                        <input type="text" id="cust_name" name="cust_name" list="customerList"
                                            class="form-input w-full rounded-md mt-1 border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-2 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500 dark:hover:border-slate-700"
                                            placeholder="Enter customer name" list="customerList" required>
                                        <span id="cust_error" style="display:none; color:red;">Customer does not
                                            exist.</span>

                                        <datalist id="customerList"></datalist>

                                    </div>
                                    <div class="flex items-center ml-8 mt-6">
                                        <a href="addCustomer.html"
                                            class="px-3 py-1 bg-brand  text-white text-sm  rounded hover:bg-brand-600 border border-brand-500 font-bold rounded">+</a>
                                    </div>
                                    <div class="ml-8"> <!-- Increased margin-left to add more space -->
                                        <label for="sales_date"
                                            class="font-medium text-sm text-slate-600 dark:text-slate-400">Date</label>
                                        <input type="date" id="sales_date" name="sales_date"
                                            class="form-input w-full rounded-md mt-1 border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-2 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500 dark:hover:border-slate-700">
                                    </div>
                                </div>
                                <!-- New row for product SKU or barcode -->
                                <div class="mb-2 flex items-center mt-4">
                                    <div class="flex-grow">
                                        <label for="product_search"
                                            class="font-medium text-sm text-slate-600 dark:text-slate-400">Product
                                            SKU/Barcode</label>
                                        <div class="flex">
                                            <input type="text" id="product_search" name="product_search"
                                                class="form-input w-full rounded-l-md mt-1 border border-r-0 border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-2 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500 dark:hover:border-slate-700"
                                                placeholder="Scan or enter product SKU" list="productList" required>
                                            <datalist id="productList"></datalist>
                                            <button id="add_product"
                                                class="bg-brand text-white text-sm rounded-r-md mt-1 border border-l-0 border-brand-500 px-4 py-2 hover:bg-brand-600 focus:outline-none">
                                                Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div><!--end card-body-->
                        </div><!--end card-->
                        <div class="bg-gray-50 dark:bg-gray-700/20">
                            <div class="grid grid-cols-1 p-4">
                                <div class="sm:-mx-6 lg:-mx-8">
                                    <div class="relative overflow-x-auto block w-full sm:px-6 lg:px-8">
                                        <table class="w-full">
                                            <table class="w-full" id="productTable">
                                                <thead class="bg-gray-50 dark:bg-gray-600/20">
                                                    <tr>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            SKU/Barcode</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Product Name</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Brand</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Category</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Price</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Quantity</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Discount</th>
                                                        <th scope="col"
                                                            class="p-3 text-xs font-medium tracking-wider text-left text-gray-700 dark:text-gray-400 uppercase">
                                                            Total</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Data rows will be dynamically inserted here -->
                                                </tbody>
                                            </table>
                                        </table>
                                    </div><!--end div-->
                                </div><!--end div-->
                            </div><!--end grid-->
                        </div><!--end card-->
                    </div><!--end col-->
                    <div class="col-span-12 sm:col-span-12 md:col-span-12 lg:col-span-4 xl:col-span-3">

                        <div
                            class="bg-black dark:bg-slate-700/20 shadow dark:shadow-none rounded-md relative w-full mt-4">

                            <div class="flex-auto p-4">
                                <div class="grid grid-cols-1  rounded-md">
                                    <div class="sm:-mx-6 lg:-mx-8">
                                        <div class="relative overflow-x-auto block w-full sm:px-6 lg:px-8">
                                            <table class="min-w-full">
                                                <tbody>
                                                    <!-- 1 -->
                                                    <tr
                                                        class="border-b border-dashed border-slate-500/60 dark:border-slate-700/40">
                                                        <td
                                                            class="p-3 text-sm text-gray-300 whitespace-nowrap font-medium">
                                                            Subtotal
                                                        </td>
                                                        <td class="p-3 text-sm font-medium text-gray-400 whitespace-nowrap"
                                                            id="subtotalDisplay">
                                                            RM 0.00
                                                        </td>
                                                    </tr>
                                                    <!-- 2 -->
                                                    <tr
                                                        class="border-b border-dashed border-slate-500/60 dark:border-slate-700/40">
                                                        <td
                                                            class="p-3 text-sm text-gray-300 whitespace-nowrap font-medium">
                                                            Total Discount
                                                        </td>
                                                        <td class="p-3 text-sm font-medium text-gray-400 whitespace-nowrap"
                                                            id="totalDiscountDisplay">
                                                            -RM 0.00
                                                        </td>
                                                    </tr>
                                                    <!-- 3 -->
                                                    <tr
                                                        class="border-b border-dashed border-slate-500/60 dark:border-slate-700/40">
                                                        <td
                                                            class="p-3 text-sm text-gray-300 whitespace-nowrap font-medium">
                                                            Shipping Charge
                                                        </td>
                                                        <td
                                                            class="p-3 text-sm font-medium text-gray-400 whitespace-nowrap">
                                                            <input type="text" id="sales_shipping" name="sales_shipping"
                                                                class="form-input w-full rounded-md border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-1 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500 dark:hover:border-slate-700"
                                                                value="0.00" required>
                                                        </td>
                                                    </tr>
                                                    <!-- 4 -->
                                                    <tr
                                                        class="border-t-2 border-solid border-slate-500/60 dark:border-slate-700/40">
                                                        <td
                                                            class="p-3 text-base text-gray-200 whitespace-nowrap font-medium">
                                                            Total
                                                        </td>
                                                        <td class="p-3 text-base font-medium text-gray-100 whitespace-nowrap"
                                                            id="totalDisplay">
                                                            RM 0.00
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div><!--end card-->
                        <div class="grid grid-cols-2 gap-3 mt-4">
                            <div class="col-span-2">
                                <label for="sales_type"
                                    class="font-medium text-sm text-slate-600 dark:text-slate-400">Payment Type</label>
                                <div class="relative">
                                    <select id="sales_type" name="sales_type"
                                        class="form-input w-full rounded-md mt-1 border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-2 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500 dark:hover:border-slate-700"
                                        required>
                                        <option value="" disabled selected>Choose type</option>
                                        <option value="Cash">Cash</option>
                                        <option value="Credit/Debit Card">Credit/Debit Card</option>
                                        <option value="Online Banking">Online Banking</option>
                                    </select>
                                    <i
                                        class="fas fa-chevron-down absolute inset-y-0 right-3 flex items-center pointer-events-none text-slate-400"></i>
                                </div>
                            </div>
                            <div class="col-span-2">
                                <label for="sales_paid"
                                    class="font-medium text-sm text-slate-600 dark:text-slate-400">Amount
                                    Paid (RM)</label>
                                <input type="title" id="sales_paid"
                                    class="form-input w-full rounded-md mt-1 border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-2 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-brand-500 dark:focus:border-brand-500  dark:hover:border-slate-700"
                                    placeholder="Amount Paid" required="">
                            </div>
                            <div class="col-span-2">
                                <label for="sales_remark"
                                    class="font-medium text-sm text-slate-600 dark:text-slate-400">Remark</label>
                                <textarea id="sales_remark" rows="3"
                                    class="form-input w-full rounded-md mt-1 border border-slate-300/60 dark:border-slate-700 dark:text-slate-300 bg-transparent px-3 py-1 focus:outline-none focus:ring-0 placeholder:text-slate-400/70 placeholder:font-normal placeholder:text-sm hover:border-slate-400 focus:border-primary-500 dark:focus:border-primary-500  dark:hover:border-slate-700"
                                    placeholder="Remark"></textarea>
                            </div>
                            <div class="col-span-2">
                                <button id="addSalesButton"
                                    class="px-2 py-2 lg:px-4 bg-brand  text-white text-sm  rounded hover:bg-brand-600 border border-brand-500">Add
                                    Sales</button>
                                <button
                                    class="px-2 py-2 lg:px-4 bg-transparent  text-brand text-sm  rounded transition hover:bg-brand-500 hover:text-white border border-brand font-medium">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div><!--end col-->
            </div> <!--end grid-->
            <!-- footer -->
            <div
                class="absolute bottom-0 -left-4 -right-4 block print:hidden border-t p-4 h-[52px] dark:border-slate-700/40">
                <div class="container">
                    <!-- Footer Start -->
                    <footer
                        class="footer bg-transparent  text-center  font-medium text-slate-600 dark:text-slate-400 md:text-left ">
                        &copy;
                        <script>
                            var year = new Date(); document.write(year.getFullYear());
                        </script>
                        EzStock
                        <span class="float-right hidden text-slate-600 dark:text-slate-400 md:inline-block">Crafted
                            with <i class="ti ti-heart text-red-500"></i> by
                            IMS</span>
                    </footer>
                    <!-- end Footer -->
                </div>
            </div><!--end container-->
        </div><!--end container-->
        </form>
    </div><!--end page-wrapper-->
    </div><!--end /div-->


    <!-- JAVASCRIPTS -->
    <!-- <div class="menu-overlay"></div> -->
    <script src="assets/js/simplebar.min.js"></script>
    <script src="assets/js/flatpickr.min.js"></script>
    <script src="assets/js/frostui.js"></script>

    <script src="assets/js/datepicker.js"></script>
    <script src="assets/js/selectr.js"></script>
    <script src="assets/js/app.js"></script>
    <!-- JAVASCRIPTS -->
    <script>
        //User LocalStorage
        function getUserInformation() {
            return {
                user_id: localStorage.getItem('user_id'),
                name: localStorage.getItem('user_name') || 'Guest',
                user_img: localStorage.getItem('user_img') || 'uploads/users/User.png' // Default image if not set
            };
        }

        function displayUserInfo() {
            const userInfo = getUserInformation();
            console.log('User ID:', userInfo.user_id);
            console.log('User Name:', userInfo.name);
            console.log('User Image:', userInfo.user_img);

            // Display user image if element exists
            const userImageElement = document.getElementById('userImage');
            if (userImageElement) {
                userImageElement.src = userInfo.user_img;
            }

            // Display user name if element exists
            const usernameElement = document.getElementById('username');
            if (usernameElement) {
                usernameElement.textContent = userInfo.name;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            displayUserInfo();
        });

        function clearUserInformation() {
            localStorage.removeItem('user_id');
            localStorage.removeItem('user_name');
            localStorage.removeItem('user_img'); // Also clear the user image
            // Optionally, you can add a redirect here if needed
            window.location.href = 'login.html';
        }

        function confirmLogout() {
            if (window.confirm("Are you sure you want to log out?")) {
                localStorage.clear();
                window.location.href = 'logout.php';
            }
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            const today = new Date();
            const offset = today.getTimezoneOffset() * 60000; // Convert offset to milliseconds
            const localISOTime = new Date(today.getTime() - offset).toISOString().split('T')[0];
            document.getElementById('sales_date').value = localISOTime;
        });


        document.getElementById('cust_name').addEventListener('input', function () {
            fetch(`loadSalesCust.php?query=${this.value}`)
                .then(response => response.json())
                .then(data => {
                    const dataList = document.getElementById('customerList');
                    dataList.innerHTML = ''; // Clear previous options
                    data.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.cust_name;
                        dataList.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading customer data:', error));
        });

        $(document).ready(function () {
            var productList = [];

            function updateProductTotal(row) {
                const price = parseFloat(row.find('.price-cell').text().replace('RM ', ''));
                const quantity = parseInt(row.find('.quantity-input').val());
                const discount = parseFloat(row.find('.discount-input').val());
                const total = (price * quantity) * (1 - (discount / 100));
                const discountAmount = (price * quantity) * (discount / 100);
                row.find('.total-cell').text(`RM ${total.toFixed(2)}`);
                row.data('discount', discountAmount);
                updateOverallTotal();
            }

            // var updateOverallTotal = function () {
            //     var subtotal = 0;
            //     var totalDiscount = 0;
            //     var shippingCharge = parseFloat($('#sales_shipping').val()) || 0;

            //     $('#productTable tbody tr').each(function () {
            //         const price = parseFloat($(this).find('.price-cell').text().replace('RM ', ''));
            //         const quantity = parseInt($(this).find('.quantity-input').val());
            //         const discount = $(this).data('discount') || 0;
            //         subtotal += price * quantity;
            //         totalDiscount += discount;
            //     });

            //     var grandTotal = subtotal - totalDiscount + shippingCharge;

            //     $('#subtotalDisplay').text(`RM ${subtotal.toFixed(2)}`);
            //     $('#totalDiscountDisplay').text(`-RM ${totalDiscount.toFixed(2)}`);
            //     $('#totalDisplay').text(`RM ${grandTotal.toFixed(2)}`);

            //     return { grandTotal, subtotal, totalDiscount };
            // };

            $(document).ready(function () {
                $('#sales_shipping').on('input', function () {
                    updateOverallTotal();
                });
            });

            $('#sales_shipping').on('input', function () {
                updateOverallTotal(); // Update totals when shipping charge changes
            });

            function addOrUpdateProduct(product) {
                const existingRow = $('#productTable tbody tr').filter(function () {
                    return $(this).data('sku') === product.prod_SKU;
                });

                if (existingRow.length > 0) {
                    // Product already exists, update the quantity
                    const qtyInput = existingRow.find('.quantity-input');
                    qtyInput.val(parseInt(qtyInput.val()) + 1);
                    updateProductTotal(existingRow);
                } else {
                    // Product does not exist, add new row
                    var total = (product.prod_price * (1 - (product.prod_discount / 100))).toFixed(2);
                    const row = $(`
                    <tr class="product-row" data-sku="${product.prod_SKU}">
                        <td class="p-3 text-sm font-medium whitespace-nowrap dark:text-white">${product.prod_SKU}</td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400">${product.prod_name}</td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400">${product.prod_brand}</td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400">${product.prod_category}</td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400 price-cell">RM ${product.prod_price}</td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400">
                            <input type="number" value="1" min="1" class="quantity-input w-16" />
                        </td>
                        <td class="p-3 text-sm text-gray-500 whitespace-nowrap dark:text-gray-400">
                            <input type="number" value="${product.prod_discount}" class="discount-input w-16" />
                        </td>
                        <td class="p-3 font-semibold text-lg text-gray-800 whitespace-nowrap dark:text-gray-400 total-cell">RM ${total}</td>
                        <td class="p-3 text-sm font-medium whitespace-nowrap">
                            <button class="delete-row-btn text-red-500 hover:text-red-700">
                                <i class="fa fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `);
                    $('#productTable tbody').append(row);

                    row.find('.quantity-input, .discount-input').on('change', function () {
                        updateProductTotal(row);
                    });

                    row.find('.delete-row-btn').on('click', function () {
                        $(this).closest('tr').remove();
                        updateOverallTotal();
                    });

                    updateProductTotal(row); // Ensure total is updated when a new row is added
                }
            }

            function fetchProductData(searchTerm) {
                if (!searchTerm.trim()) return;

                var user_id = localStorage.getItem('user_id');
                console.log("User ID:", user_id);
                console.log("Search Term:", searchTerm);

                $.ajax({
                    url: 'checkSalesPdt.php',
                    type: 'GET',
                    data: { searchTerm: searchTerm, user_id: user_id },
                    success: function (data) {
                        if (data.length > 0) {
                            $.each(data, function (index, product) {
                                addOrUpdateProduct(product);
                            });
                        } else {
                            $('#productTable tbody').append('<tr><td colspan="8" class="text-center text-gray-500">Product not found</td></tr>');
                        }
                    },
                    error: function (xhr, status, error) {
                        alert('Error retrieving product data: ' + error);
                    }
                });
            }

            $('#add_product').click(function () {
                var searchTerm = $('#product_search').val();
                fetchProductData(searchTerm);
            });

            $('#product_search').keypress(function (e) {
                if (e.which == 13) {
                    e.preventDefault();
                    var searchTerm = $(this).val();
                    fetchProductData(searchTerm);
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            const addSalesButton = document.getElementById('addSalesButton');

            addSalesButton.addEventListener('click', function () {
                addSales(); // Call the addSales function when the button is clicked
            });
        });

        // function addSales() {
        //     const totals = updateOverallTotal(); // This should now work as expected
        //     var dataList = [];
        //     var dropdown = document.getElementById('sales_type');
        //     var selectedValue = dropdown.value;
        //     var salesPaid = document.getElementById('sales_paid').value;
        //     var remark = document.getElementById('sales_remark').value;
        //     var salesOrderTitle = document.getElementById('salesOrderTitle').textContent;
        //     var salesDateInput = document.getElementById('sales_date').value;
        //     var custName = document.getElementById('cust_name').value;
        //     var prod_SKU = "a"; // Example SKU, replace with actual data
        //     var grandTotal = totals.grandTotal;
        //     var subtotal = totals.subtotal;
        //     var totalDiscount = totals.totalDiscount;
        //     var shippingCharge = document.getElementById('sales_shipping').value;

        //     dataList.push({
        //         salesOrderTitle, salesDateInput, custName, prod_SKU, grandTotal, subtotal, totalDiscount, shippingCharge, selectedValue, salesPaid, remark
        //     });

        //     console.log(dataList);
        //     fetch('addSales.php', {
        //         method: 'POST',
        //         body: JSON.stringify(dataList)
        //     })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Network response was not ok: ' + response.statusText);
        //             }
        //             return response.json();
        //         })
        //         .then(data => {
        //             console.log('Server Response:', data);
        //             if (data.success) {
        //                 alert('Sales added successfully!');
        //                 window.location.href = 'addSales.html';
        //             } else {
        //                 alert('Failed to add sales: ' + data.error);
        //             }
        //         });
        // }

        document.addEventListener("DOMContentLoaded", function () {
            var userId = localStorage.getItem('user_id');
            if (userId) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'checkSalesPdt.php?searchTerm=' + encodeURIComponent(searchTerm) + '&user_id=' + encodeURIComponent(userId), true);
                xhr.onload = function () {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        console.log('Response:', xhr.responseText);
                    } else {
                        console.error('Request failed');
                    }
                };
                xhr.send();
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
            const salesOrderTitle = document.getElementById('salesOrderTitle');
            const salesDateInput = document.getElementById('sales_date');

            function generateSalesOrderNumber(date, sequenceNumber) {
                const year = date.getFullYear().toString().slice(-2); // Last two digits of the year
                const month = (date.getMonth() + 1).toString().padStart(2, '0'); // Month as two digits
                const day = date.getDate().toString().padStart(2, '0'); // Day as two digits
                const sequence = sequenceNumber.toString().padStart(4, '0'); // Sequence number padded to four digits

                return `${year}${month}${day}${sequence}`;
            }

            // Fetch the next sequence number from the server
            function fetchNextSequenceNumber(date) {
                const userId = localStorage.getItem('user_id');
                fetch(`getSalesNextSequenceNumber.php?date=${date.toISOString().split('T')[0]}&user_id=${userId}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.nextSequenceNumber) {
                            updateSalesOrderNumber(date, data.nextSequenceNumber);
                        } else {
                            console.error('Failed to fetch sequence number:', data.error);
                        }
                    })
                    .catch(error => console.error('Error fetching sequence number:', error));
            }

            // Update sales order number based on the selected date
            function updateSalesOrderNumber(date, nextSequenceNumber) {
                const orderNumber = generateSalesOrderNumber(date, nextSequenceNumber);
                salesOrderTitle.textContent = `SO#${orderNumber}`;
            }

            // Set initial sales order number
            const initialDate = new Date();
            fetchNextSequenceNumber(initialDate);

            // Add event listener to update order number when date changes
            salesDateInput.addEventListener('change', function () {
                const selectedDate = new Date(this.value);
                fetchNextSequenceNumber(selectedDate);
            });
        });

        document.getElementById('cust_name').addEventListener('input', debounce(function () {
            const custName = this.value.trim();
            const userId = localStorage.getItem('user_id'); // Retrieve user_id from localStorage

            // Clear any previous styles or messages
            const inputElement = document.getElementById('cust_name');
            const errorSpan = document.getElementById('cust_error');
            inputElement.style.borderBottom = 'none';
            errorSpan.style.display = 'none';
            errorSpan.textContent = '';

            if (!custName) {
                return; // If the input is empty, do nothing
            }

            fetch(`checkSalesCust.php?cust_name=${encodeURIComponent(custName)}&user_id=${encodeURIComponent(userId)}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if (!data.exists) {
                        errorSpan.textContent = 'Customer does not exist.';
                        errorSpan.style.display = 'block';
                        inputElement.style.borderBottom = '2px solid red';
                        inputElement.style.paddingBottom = '3px';
                        return; // Stop further checks if no customer exists
                    }

                    // Check if cust_id starts with "Cust-" but not "CustDraft-"
                    if (data.cust_id.startsWith("Cust-") && !data.cust_id.includes("Draft")) {
                        errorSpan.style.display = 'none';
                        inputElement.style.borderBottom = 'none';
                        inputElement.style.paddingBottom = '2px';
                    } else {
                        errorSpan.textContent = 'Customer should not be in draft format.';
                        errorSpan.style.display = 'block';
                        inputElement.style.borderBottom = '2px solid red';
                        inputElement.style.paddingBottom = '3px';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    errorSpan.textContent = 'Error checking customer.';
                    errorSpan.style.display = 'block';
                });
        }, 500));
        // Debounce function to limit the rate at which a function is executed
        function debounce(func, delay) {
            let debounceTimer;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => func.apply(context, args), delay);
            };
        }

        document.getElementById('cust_name').addEventListener('input', debounce(function () {
            const inputElement = this;
            const partialName = inputElement.value.trim();
            const userId = localStorage.getItem('user_id'); // Retrieve user_id from localStorage

            if (!partialName) {
                return; // If the input is empty, do nothing
            }

            const url = `suggestSalesCust.php?partial_name=${encodeURIComponent(partialName)}&user_id=${encodeURIComponent(userId)}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const dataList = document.getElementById('customerList');
                    dataList.innerHTML = ''; // Clear previous options
                    data.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item;
                        dataList.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading customer data:', error));
        }, 300)); // Debounce the input event to limit the rate of AJAX calls

        // Debounce function to limit the rate at which a function is executed
        function debounce(func, delay) {
            let debounceTimer;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => func.apply(context, args), delay);
            };
        }

        // Suggest Product SKU/Barcode
        document.getElementById('product_search').addEventListener('input', debounce(function () {
            const inputElement = this;
            const partialInput = inputElement.value.trim();  // This can be SKU or Barcode
            const userId = localStorage.getItem('user_id'); // Retrieve user_id from localStorage

            if (!partialInput) {
                return; // If the input is empty, do nothing
            }

            const url = `suggestSalesPdt.php?search_term=${encodeURIComponent(partialInput)}&user_id=${encodeURIComponent(userId)}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const dataList = document.getElementById('productList');
                    dataList.innerHTML = ''; // Clear previous options
                    data.forEach(item => {
                        // Display format: "Product Name (SKU/Barcode) - InStock Qty: Quantity"
                        const option = document.createElement('option');
                        option.value = `${item.prod_barcode}`;
                        option.textContent = `${item.prod_SKU} / ${item.prod_name} - InStock Qty: ${item.prod_qty}`;
                        dataList.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading product data:', error));
        }, 300)); // Debounce the input event to limit the rate of AJAX calls

        // Debounce function to limit the rate at which a function is executed
        function debounce(func, delay) {
            let debounceTimer;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => func.apply(context, args), delay);
            };
        }

        var updateOverallTotal = function () {
            var subtotal = 0;
            var totalDiscount = 0;
            var shippingCharge = parseFloat($('#sales_shipping').val()) || 0;

            $('#productTable tbody tr').each(function () {
                const price = parseFloat($(this).find('.price-cell').text().replace('RM ', ''));
                const quantity = parseInt($(this).find('.quantity-input').val());
                const discount = $(this).data('discount') || 0;
                subtotal += price * quantity;
                totalDiscount += discount;
            });

            var grandTotal = subtotal - totalDiscount + shippingCharge;

            $('#subtotalDisplay').text(`RM ${subtotal.toFixed(2)}`);
            $('#totalDiscountDisplay').text(`-RM ${totalDiscount.toFixed(2)}`);
            $('#totalDisplay').text(`RM ${grandTotal.toFixed(2)}`);

            return { grandTotal, subtotal, totalDiscount };
        };
        function addSales() {
            const totals = updateOverallTotal(); // This should now work as expected
            var dataList = [];
            var dropdown = document.getElementById('sales_type');
            var selectedValue = dropdown.value;
            var salesPaid = document.getElementById('sales_paid').value;
            var remark = document.getElementById('sales_remark').value;
            var salesOrderTitle = document.getElementById('salesOrderTitle').textContent;
            var salesDateInput = document.getElementById('sales_date').value;

            var custName = document.getElementById('cust_name').value;
            var grandTotal = totals.grandTotal;
            var subtotal = totals.subtotal;
            var totalDiscount = totals.totalDiscount;
            var shippingCharge = document.getElementById('sales_shipping').value;

            // Collect SKU and quantity from each product row
            var productDetails = [];
            $('#productTable tbody tr').each(function () {
                var sku = $(this).data('sku'); // Assuming data-sku attribute holds the SKU
                var quantity = $(this).find('.quantity-input').val(); // Get the quantity input value
                productDetails.push(`${sku} ----- ${quantity}`);
            });

            var userId = localStorage.getItem('user_id');
            dataList.push({
                userId, salesOrderTitle, salesDateInput, custName, productDetails, grandTotal, subtotal, totalDiscount, shippingCharge, selectedValue, salesPaid, remark
            });

            console.log(dataList);

            fetch('addSales.php', {
                method: 'POST',
                body: JSON.stringify(dataList),
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text(); // First read it as text
                })
                .then(text => {
                    try {
                        const data = JSON.parse(text); // Try to parse it as JSON
                        if (data.success) {
                            alert('Sales added successfully!');
                            window.location.href = 'addSales.html';
                        } else {
                            alert('Sales added successfully!');
                            // alert('Failed to add sales: ' + data.error);
                        }
                    } catch (error) {
                        console.error('Failed to parse JSON:', text);
                        alert('Server response is not a valid JSON: ' + text);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Failed to process request: ' + error.message);
                });
        }


    </script>
</body>

</html>